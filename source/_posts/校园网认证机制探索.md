---
title: 校园网认证机制探索
date: 2022-06-23
categories:
  - 网络工程
---

## 结论：

- 校园网是通过mac区分设备，进行认证的
- 某个mac通过认证后，可以通过这个mac上网并且无需验证
- 两台设备共享一个mac上网规避设备限制不现实

## 过程

要实现两台设备一个mac，可谓是大费周折。首先找来一块支持更换mac的网卡，修改mac发现修改有限制，只能修改为局域mac(类似于私有ip)，而我的手机mac恰好是全局mac,而且安卓修改mac更困难。

[在 Windows 下修改 MAC 地址时，为什么第 2 个十六进制字符只能是 2、6、A、E 之一？](https://www.zhihu.com/question/21805731)

后来想到手机也有随机mac的功能，于是想到可以使用随机mac认证一个mac，于是实现了两台设备相同mac。

### 局域网中，两台设备相同mac会发生什么

在以前的集线器时代，无非是网卡收到不是发送给自己的数据包，然后提交给操作系统——但是没有应用程序处理这些数据而已。

但在交换机的端口隔离下，局域网中相同mac的设备可能发生以下情况——自己的请求收不到应答（应答在隔壁呢）于是触发数据重传，导致网络拥堵不堪。

实际上确实如此，两台设备争抢资源非常严重，网速降至龟速，无法实现平分网速。

### 如果此时其中一台设备选择下线呢？

另一台设备可以正常上网。并且网关不会重新检测设备类型，可以实现绕过设备类型限制

![](images/1655992062756-1024x616.jpg)

如图，实际上现在是一台pc在正常上网。

下一步，打算利用mac认证整一个路由器分享校园网。
