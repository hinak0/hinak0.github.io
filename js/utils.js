(()=>{const e={debounce:(e,t=0,n=false)=>{let o;return(...i)=>{const a=()=>{o=null;if(!n)e(...i)};const s=n&&!o;clearTimeout(o);o=setTimeout(a,t);if(s)e(...i)}},throttle:function(e,t,n={}){let o,i,a;let s=0;const r=()=>{s=n.leading===false?0:(new Date).getTime();o=null;e.apply(i,a);if(!o)i=a=null};const l=(...l)=>{const d=(new Date).getTime();if(!s&&n.leading===false)s=d;const c=t-(d-s);i=this;a=l;if(c<=0||c>t){if(o){clearTimeout(o);o=null}s=d;e.apply(i,a);if(!o)i=a=null}else if(!o&&n.trailing!==false){o=setTimeout(r,c)}};return l},overflowPaddingR:{add:()=>{const e=window.innerWidth-document.body.clientWidth;if(e>0){document.body.style.paddingRight=`${e}px`;document.body.style.overflow="hidden";const t=document.querySelector("#page-header.nav-fixed #menus");if(t){t.style.paddingRight=`${e}px`}}},remove:()=>{document.body.style.paddingRight="";document.body.style.overflow="";const e=document.querySelector("#page-header.nav-fixed #menus");if(e){e.style.paddingRight=""}}},snackbarShow:(e,t=false,n=2e3)=>{const{position:o,bgLight:i,bgDark:a}=GLOBAL_CONFIG.Snackbar;const s=document.documentElement.getAttribute("data-theme")==="light"?i:a;Snackbar.show({text:e,backgroundColor:s,showAction:t,duration:n,pos:o,customClass:"snackbar-css"})},diffDate:(e,t=false)=>{const n=new Date;const o=new Date(e);const i=n-o;const a=i/1e3;const s=a/60;const r=s/60;const l=r/24;const d=l/30;const{dateSuffix:c}=GLOBAL_CONFIG;if(!t)return Math.floor(l);if(d>12)return o.toISOString().slice(0,10);if(d>=1)return`${Math.floor(d)} ${c.month}`;if(l>=1)return`${Math.floor(l)} ${c.day}`;if(r>=1)return`${Math.floor(r)} ${c.hour}`;if(s>=1)return`${Math.floor(s)} ${c.min}`;return c.just},loadComment:(e,t)=>{if("IntersectionObserver"in window){const n=new IntersectionObserver((e=>{if(e[0].isIntersecting){t();n.disconnect()}}),{threshold:[0]});n.observe(e)}else{t()}},scrollToDest:(e,t=500)=>{const n=window.scrollY;const o=document.getElementById("page-header").classList.contains("fixed");if(n>e||o)e=e-70;if("scrollBehavior"in document.documentElement.style){window.scrollTo({top:e,behavior:"smooth"});return}const i=performance.now();const a=o=>{const s=o-i;const r=Math.min(s/t,1);window.scrollTo(0,n+(e-n)*r);if(r<1){requestAnimationFrame(a)}};requestAnimationFrame(a)},animateIn:(e,t)=>{e.style.display="block";e.style.animation=t},animateOut:(e,t)=>{const n=()=>{e.style.display="";e.style.animation="";e.removeEventListener("animationend",n)};e.addEventListener("animationend",n);e.style.animation=t},wrap:(e,t,n)=>{const o=document.createElement(t);for(const[e,t]of Object.entries(n)){o.setAttribute(e,t)}e.parentNode.insertBefore(o,e);o.appendChild(e)},isHidden:e=>e.offsetHeight===0&&e.offsetWidth===0,getEleTop:e=>{let t=e.offsetTop;let n=e.offsetParent;while(n!==null){t+=n.offsetTop;n=n.offsetParent}return t},loadLightbox:e=>{const t=GLOBAL_CONFIG.lightbox;if(t==="medium_zoom"){mediumZoom(e,{background:"var(--zoom-bg)"})}if(t==="fancybox"){Array.from(e).forEach((e=>{if(e.parentNode.tagName!=="A"){const t=e.dataset.lazySrc||e.src;const n=e.title||e.alt||"";btf.wrap(e,"a",{href:t,"data-fancybox":"gallery","data-caption":n,"data-thumb":t})}}));if(!window.fancyboxRun){Fancybox.bind("[data-fancybox]",{Hash:false,Thumbs:{showOnStart:false},Images:{Panzoom:{maxScale:4}},Carousel:{transition:"slide"},Toolbar:{display:{left:["infobar"],middle:["zoomIn","zoomOut","toggle1to1","rotateCCW","rotateCW","flipX","flipY"],right:["slideshow","thumbs","close"]}}});window.fancyboxRun=true}}},setLoading:{add:e=>{const t=`\n        <div class="loading-container">\n          <div class="loading-item">\n            <div></div><div></div><div></div><div></div><div></div>\n          </div>\n        </div>\n      `;e.insertAdjacentHTML("afterend",t)},remove:e=>{e.nextElementSibling.remove()}},updateAnchor:e=>{if(e!==window.location.hash){if(!e)e=location.pathname;const t=GLOBAL_CONFIG_SITE.title;window.history.replaceState({url:location.href,title:t},t,e)}},getScrollPercent:(()=>{let e,t,n,o;return(i,a)=>{if(!e||a.clientHeight!==e){e=a.clientHeight;t=window.innerHeight;n=a.offsetTop;o=Math.max(e-t,document.documentElement.scrollHeight-t)}const s=(i-n)/o;return Math.max(0,Math.min(100,Math.round(s*100)))}})(),addEventListenerPjax:(e,t,n,o=false)=>{e.addEventListener(t,n,o);btf.addGlobalFn("pjaxSendOnce",(()=>{e.removeEventListener(t,n,o)}))},removeGlobalFnEvent:(e,t=window)=>{const n=t.globalFn||{};const o=n[e];if(!o)return;Object.keys(o).forEach((e=>o[e]()));delete n[e]},switchComments:(e=document,t)=>{const n=e.querySelector("#switch-btn");if(!n)return;let o=false;const i=e.querySelector("#post-comment");const a=()=>{i.classList.toggle("move");if(!o&&typeof loadOtherComment==="function"){o=true;loadOtherComment(e,t)}};btf.addEventListenerPjax(n,"click",a)}};window.btf={...window.btf,...e}})();