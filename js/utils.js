(()=>{const e={debounce:(e,t=0,o=false)=>{let n;return(...i)=>{const a=()=>{n=null;if(!o)e(...i)};const s=o&&!n;clearTimeout(n);n=setTimeout(a,t);if(s)e(...i)}},throttle:function(e,t,o={}){let n,i,a;let s=0;const l=()=>{s=o.leading===false?0:(new Date).getTime();n=null;e.apply(i,a);if(!n)i=a=null};const r=(...r)=>{const d=(new Date).getTime();if(!s&&o.leading===false)s=d;const c=t-(d-s);i=this;a=r;if(c<=0||c>t){if(n){clearTimeout(n);n=null}s=d;e.apply(i,a);if(!n)i=a=null}else if(!n&&o.trailing!==false){n=setTimeout(l,c)}};return r},overflowPaddingR:{add:()=>{const e=window.innerWidth-document.body.clientWidth;if(e>0){document.body.style.paddingRight=`${e}px`;document.body.style.overflow="hidden";const t=document.querySelector("#page-header.nav-fixed #menus");if(t){t.style.paddingRight=`${e}px`}}},remove:()=>{document.body.style.paddingRight="";document.body.style.overflow="";const e=document.querySelector("#page-header.nav-fixed #menus");if(e){e.style.paddingRight=""}}},snackbarShow:(e,t=false,o=2e3)=>{const{position:n,bgLight:i,bgDark:a}=GLOBAL_CONFIG.Snackbar;const s=document.documentElement.getAttribute("data-theme")==="light"?i:a;Snackbar.show({text:e,backgroundColor:s,showAction:t,duration:o,pos:n,customClass:"snackbar-css"})},diffDate:(e,t=false)=>{const o=new Date;const n=new Date(e);const i=o-n;const a=i/1e3;const s=a/60;const l=s/60;const r=l/24;const d=r/30;const{dateSuffix:c}=GLOBAL_CONFIG;if(!t)return Math.floor(r);if(d>12)return n.toISOString().slice(0,10);if(d>=1)return`${Math.floor(d)} ${c.month}`;if(r>=1)return`${Math.floor(r)} ${c.day}`;if(l>=1)return`${Math.floor(l)} ${c.hour}`;if(s>=1)return`${Math.floor(s)} ${c.min}`;return c.just},loadComment:(e,t)=>{if("IntersectionObserver"in window){const o=new IntersectionObserver(e=>{if(e[0].isIntersecting){t();o.disconnect()}},{threshold:[0]});o.observe(e)}else{t()}},scrollToDest:(e,t=500)=>{const o=window.scrollY;const n=document.getElementById("page-header").classList.contains("fixed");if(o>e||n)e=e-70;if("scrollBehavior"in document.documentElement.style){window.scrollTo({top:e,behavior:"smooth"});return}const i=performance.now();const a=n=>{const s=n-i;const l=Math.min(s/t,1);window.scrollTo(0,o+(e-o)*l);if(l<1){requestAnimationFrame(a)}};requestAnimationFrame(a)},animateIn:(e,t)=>{e.style.display="block";e.style.animation=t},animateOut:(e,t)=>{const o=()=>{e.style.display="";e.style.animation="";e.removeEventListener("animationend",o)};e.addEventListener("animationend",o);e.style.animation=t},wrap:(e,t,o)=>{const n=document.createElement(t);for(const[e,t]of Object.entries(o)){n.setAttribute(e,t)}e.parentNode.insertBefore(n,e);n.appendChild(e)},isHidden:e=>e.offsetHeight===0&&e.offsetWidth===0,getEleTop:e=>{let t=e.offsetTop;let o=e.offsetParent;while(o!==null){t+=o.offsetTop;o=o.offsetParent}return t},loadLightbox:e=>{const t=GLOBAL_CONFIG.lightbox;if(t==="medium_zoom"){mediumZoom(e,{background:"var(--zoom-bg)"});return}if(t==="fancybox"){Array.from(e).forEach(e=>{if(e.parentNode.tagName!=="A"){const t=e.dataset.lazySrc||e.src;const o=e.title||e.alt||"";btf.wrap(e,"a",{href:t,"data-fancybox":"gallery","data-caption":o,"data-thumb":t})}});if(!window.fancyboxRun){let e="";if(Fancybox.version<"6"){e={Hash:false,Thumbs:{showOnStart:false},Images:{Panzoom:{maxScale:4}},Carousel:{transition:"slide"},Toolbar:{display:{left:["infobar"],middle:["zoomIn","zoomOut","toggle1to1","rotateCCW","rotateCW","flipX","flipY"],right:["slideshow","thumbs","close"]}}}}else{e={Hash:false,Carousel:{transition:"slide",Thumbs:{showOnStart:false},Toolbar:{display:{left:["counter"],middle:["zoomIn","zoomOut","toggle1to1","rotateCCW","rotateCW","flipX","flipY","reset"],right:["autoplay","thumbs","close"]}},Zoomable:{Panzoom:{maxScale:4}}}}}Fancybox.bind("[data-fancybox]",e);window.fancyboxRun=true}}},setLoading:{add:e=>{const t=`\n        <div class="loading-container">\n          <div class="loading-item">\n            <div></div><div></div><div></div><div></div><div></div>\n          </div>\n        </div>\n      `;e.insertAdjacentHTML("afterend",t)},remove:e=>{e.nextElementSibling.remove()}},updateAnchor:e=>{if(e!==window.location.hash){if(!e)e=location.pathname;const t=GLOBAL_CONFIG_SITE.title;window.history.replaceState({url:location.href,title:t},t,e)}},getScrollPercent:(()=>{let e,t,o,n;return(i,a)=>{if(!e||a.clientHeight!==e){e=a.clientHeight;t=window.innerHeight;o=a.offsetTop;n=Math.max(e-t,document.documentElement.scrollHeight-t)}const s=(i-o)/n;return Math.max(0,Math.min(100,Math.round(s*100)))}})(),addEventListenerPjax:(e,t,o,n=false)=>{e.addEventListener(t,o,n);btf.addGlobalFn("pjaxSendOnce",()=>{e.removeEventListener(t,o,n)})},removeGlobalFnEvent:(e,t=window)=>{const o=t.globalFn||{};const n=o[e];if(!n)return;Object.keys(n).forEach(e=>n[e]());delete o[e]},switchComments:(e=document,t)=>{const o=e.querySelector("#switch-btn");if(!o)return;let n=false;const i=e.querySelector("#post-comment");const a=()=>{i.classList.toggle("move");if(!n&&typeof loadOtherComment==="function"){n=true;loadOtherComment(e,t)}};btf.addEventListenerPjax(o,"click",a)}};window.btf={...window.btf,...e}})();